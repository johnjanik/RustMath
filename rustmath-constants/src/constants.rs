//! Mathematical constants with extended precision
//!
//! This module provides high-precision decimal representations of fundamental
//! mathematical constants. Each constant is stored with 1000+ digits of precision.

use once_cell::sync::Lazy;

/// Pi (π) - ratio of circle's circumference to diameter
/// 1000 decimal digits after the decimal point
pub static PI: Lazy<&'static str> = Lazy::new(|| PI_DIGITS);

/// Euler's number (e) - base of natural logarithm
/// 1000 decimal digits after the decimal point
pub static E: Lazy<&'static str> = Lazy::new(|| E_DIGITS);

/// Golden ratio (φ) - (1 + √5) / 2
/// 1000 decimal digits after the decimal point
pub static PHI: Lazy<&'static str> = Lazy::new(|| PHI_DIGITS);

/// Square root of 2 (√2)
/// 1000 decimal digits after the decimal point
pub static SQRT2: Lazy<&'static str> = Lazy::new(|| SQRT2_DIGITS);

/// Euler-Mascheroni constant (γ)
/// 1000 decimal digits after the decimal point
pub static EULER_GAMMA: Lazy<&'static str> = Lazy::new(|| EULER_GAMMA_DIGITS);

/// π with 1000 decimal digits
const PI_DIGITS: &str = "3.\
14159265358979323846264338327950288419716939937510\
58209749445923078164062862089986280348253421170679\
82148086513282306647093844609550582231725359408128\
48111745028410270193852110555964462294895493038196\
44288109756659334461284756482337867831652712019091\
45648566923460348610454326648213393607260249141273\
72458700660631558817488152092096282925409171536436\
78925903600113305305488204665213841469519415116094\
33057270365759591953092186117381932611793105118548\
07446237996274956735188575272489122793818301194912\
98336733624406566430860213949463952247371907021798\
60943702770539217176293176752384674818467669405132\
00056812714526356082778577134275778960917363717872\
14684409012249534301465495853710507922796892589235\
42019956112129021960864034418159813629774771309960\
51870721134999999837297804995105973173281609631859\
50244594553469083026425223082533446850352619311881\
71010003137838752886587533208381420617177669147303\
59825349042875546873115956286388235378759375195778\
18577805321712268066130019278766111959092164201989";

/// e with 1000 decimal digits
const E_DIGITS: &str = "2.\
71828182845904523536028747135266249775724709369995\
95749669676277240766303535475945713821785251664274\
27466391932003059921817413596629043572900334295260\
59563073813232862794349076323382988075319525101901\
15738341879307021540891499348841675092447614606680\
82264800168477411853742345442437107539077744992069\
55170276183860626133138458300075204493382656029760\
67371132007093287091274437470472306969772093101416\
92836819025515108657463772111252389784425056953696\
77078544996996794686445490598793163688923009879312\
77361782154249992295763514822082698951936680331825\
28869398496465105820939239829488793320362509443117\
30123819706841614039701983767932068328237646480429\
53118023287825098194558153017567173613320698112509\
96181881593041690351598888519345807273866738589422\
87922849989208680582574927961048419844436346324496\
84875602336248270419786232090021609902353043699418\
49146314093431738143640546253152096183690888707016\
76839642437814059271456354906130310720851038375051\
01157477041718986106873969655212671546889570350354";

/// φ (Golden ratio) with 1000 decimal digits
const PHI_DIGITS: &str = "1.\
61803398874989484820458683436563811772030917980576\
28621354486227052604628189024497072072041893911374\
84754088075386891752126633862223536931793180060766\
72635443338908659593958290563832266131992829026788\
06752087668925017116962070322210432162695486262963\
13614438149758701220340805887954454749246185695364\
86444924104432077134494704956584678850987433944221\
25448770664780915884607499887124007652170575179788\
34166256249407589069704000281210427621771117778053\
15317141011704666599146697987317613560067087480710\
13179523689427521948435305678300228785699782977834\
78458782289110976250030269615617002504643382437764\
86102838312683303724292675263116533924731671112115\
88186385133162038400522216579128667529465490681131\
71599343235973494985090409476213222981017261070596\
11645629909816290555208524790352406020172799747175\
34277759277862561943208275051312181562855122248093\
94712341451702237358057727861600868838295230459264\
78780178899219902707769038953219681986151437803149\
97411069260886742962267575605231727775203536139362";

/// √2 with 1000 decimal digits
const SQRT2_DIGITS: &str = "1.\
41421356237309504880168872420969807856967187537694\
80731766797379907324784621070388503875343276415727\
35013846230912297024924836055850737212644121497099\
93583141322266592750559275579995050115278206057147\
01095599716059702745345968620147285174186408891986\
09552329230484308714321450839762603627995251407989\
68725339654633180882964062061525835239505474575028\
77599617298355752203375318570113543746034084988471\
60386899970699004815030544027790316454247823068492\
93633919146531868653437381817129158368228796041993\
33637787804297506638937787304838084072192208752608\
92977854426302082187276547083547280879910913371111\
86953270936488216259500170714062590481160836134731\
10821975091563896758802032855156853555888674066012\
77417149178965097501834754242174207427785332386253\
82082945896827171935015851191208984907802964942882\
60546503562740702055448095464198164952092890200892\
65461853324119070105902834341927230768371923231086\
07629969413775913277094396542278577133608397699104\
03397940260264935242068782476618308538182998092444";

/// Euler-Mascheroni constant (γ) with 1000 decimal digits
const EULER_GAMMA_DIGITS: &str = "0.\
57721566490153286060651209008240243104215933593992\
35988057672348848677267776646709369470632917467495\
14631447249807082480960504014486542836224173997644\
92353625350033374293733773767394279259525824709491\
60087352039481656708532331517766115286211995015079\
84793745085705740029921354786146694029604325421519\
95693243468570783370750457144122797643854645867556\
49238925142491745181506995494104655586748551929471\
56667348239713105849154186403829015172913263891865\
57909862086166603832916528896442893672310846142890\
54170430280564631173308388254273107931219544291741\
20874330991436287421069081321098832078378557550348\
70072187022407109164683040529089169645933462573887\
94447656643194637634589574873237836644556035099716\
72763289627967523943614564973056086748892485388058\
32544764274357158239701251868663375179742099359738\
91362989399479206265930668468238799207395342850114\
37779965030376730370930551408405414774418156730196\
74932253692553693869992624128927421867834812909162\
87221867301494093055597093127062754996765172838014";

/// Get π to a specified number of decimal places (up to 1000)
pub fn pi_digits(digits: usize) -> &'static str {
    let _max_digits = PI_DIGITS.len().saturating_sub(2); // Subtract "3."
    let end = (digits + 2).min(PI_DIGITS.len());
    &PI_DIGITS[..end]
}

/// Get e to a specified number of decimal places (up to 1000)
pub fn e_digits(digits: usize) -> &'static str {
    let _max_digits = E_DIGITS.len().saturating_sub(2); // Subtract "2."
    let end = (digits + 2).min(E_DIGITS.len());
    &E_DIGITS[..end]
}

/// Get φ to a specified number of decimal places (up to 1000)
pub fn phi_digits(digits: usize) -> &'static str {
    let _max_digits = PHI_DIGITS.len().saturating_sub(2); // Subtract "1."
    let end = (digits + 2).min(PHI_DIGITS.len());
    &PHI_DIGITS[..end]
}

/// Get √2 to a specified number of decimal places (up to 1000)
pub fn sqrt2_digits(digits: usize) -> &'static str {
    let _max_digits = SQRT2_DIGITS.len().saturating_sub(2); // Subtract "1."
    let end = (digits + 2).min(SQRT2_DIGITS.len());
    &SQRT2_DIGITS[..end]
}

/// Get Euler-Mascheroni constant to a specified number of decimal places (up to 1000)
pub fn euler_gamma_digits(digits: usize) -> &'static str {
    let _max_digits = EULER_GAMMA_DIGITS.len().saturating_sub(2); // Subtract "0."
    let end = (digits + 2).min(EULER_GAMMA_DIGITS.len());
    &EULER_GAMMA_DIGITS[..end]
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_pi_precision() {
        assert!(PI.starts_with("3.14159"));
        assert_eq!(pi_digits(5), "3.14159");
        assert_eq!(pi_digits(10).len(), 12); // "3." + 10 digits
    }

    #[test]
    fn test_e_precision() {
        assert!(E.starts_with("2.71828"));
        assert_eq!(e_digits(5), "2.71828");
    }

    #[test]
    fn test_phi_precision() {
        assert!(PHI.starts_with("1.61803"));
        assert_eq!(phi_digits(5), "1.61803");
    }

    #[test]
    fn test_sqrt2_precision() {
        assert!(SQRT2.starts_with("1.41421"));
        assert_eq!(sqrt2_digits(5), "1.41421");
    }

    #[test]
    fn test_euler_gamma_precision() {
        assert!(EULER_GAMMA.starts_with("0.57721"));
        assert_eq!(euler_gamma_digits(5), "0.57721");
    }

    #[test]
    fn test_constant_lengths() {
        // Each should have around 1000 digits total
        assert!(PI.len() > 1000);
        assert!(E.len() > 1000);
        assert!(PHI.len() > 1000);
        assert!(SQRT2.len() > 1000);
        assert!(EULER_GAMMA.len() > 1000);
    }
}
